import 'package:flutter_test/flutter_test.dart';
import 'package:hackernews/json_parsing.dart';

void main() {
  test("Parses top_stories.json", () {
    const jsonString = "[ 19564020, 19562650, 19564179, 19563768, 19563278, 19562618, 19562920, 19561718, 19563817, 19562224, 19560515, 19552456, 19563840, 19561242, 19555373, 19563843, 19562643, 19563073, 19562715, 19555188, 19549584, 19560479, 19542567, 19559617, 19552664, 19560046, 19563615, 19561585, 19552286, 19553941, 19557848, 19550713, 19560182, 19548990, 19551208, 19559970, 19558118, 19563856, 19560962, 19562941, 19559361, 19558482, 19563905, 19563879, 19560566, 19560329, 19557169, 19560061, 19564124, 19560224, 19563767, 19555077, 19561179, 19550664, 19555633, 19558661, 19560140, 19559295, 19562794, 19558188, 19550282, 19552112, 19558030, 19558062, 19552095, 19554162, 19557850, 19556579, 19558999, 19542835, 19559854, 19543571, 19547464, 19552221, 19557450, 19563470, 19561031, 19555665, 19542379, 19563402, 19550035, 19552861, 19554644, 19562630, 19558293, 19557376, 19545700, 19557356, 19559825, 19553407, 19557300, 19550011, 19549529, 19559634, 19555452, 19546458, 19557589, 19558568, 19538839, 19551590, 19558895, 19558270, 19549453, 19545668, 19552362, 19552724, 19557393, 19552735, 19538556, 19559437, 19539006, 19553294, 19551076, 19540046, 19540400, 19560418, 19557238, 19552236, 19553452, 19559457, 19560220, 19551463, 19543940, 19550919, 19546299, 19552680, 19546224, 19555414, 19551969, 19557606, 19548904, 19551698, 19556665, 19546149, 19554469, 19556181, 19547985, 19558161, 19560437, 19550396, 19551028, 19542999, 19550028, 19552748, 19557561, 19560209, 19544863, 19544557, 19548072, 19557564, 19549353, 19553590, 19551428, 19559464, 19554272, 19545089, 19548272, 19551083, 19556566, 19547060, 19544970, 19556358, 19547983, 19543941, 19533454, 19558878, 19545264, 19560500, 19541475, 19560630, 19549279, 19535059, 19561094, 19538715, 19538227, 19559614, 19543938, 19543037, 19546653, 19557531, 19548364, 19549375, 19545555, 19533965, 19538107, 19552009, 19537807, 19558838, 19558296, 19558774, 19559798, 19556351, 19558657, 19533870, 19556219, 19545838, 19558481, 19541717, 19540678, 19544695, 19560196, 19546194, 19552370, 19548614, 19552333, 19558069, 19557939, 19547317, 19559633, 19534899, 19557489, 19535564, 19540104, 19560655, 19552525, 19534944, 19561411, 19540845, 19560884, 19547293, 19542975, 19560829, 19546433, 19552434, 19540037, 19559879, 19541741, 19534682, 19545548, 19557552, 19532904, 19549778, 19535406, 19560591, 19541617, 19536325, 19538321, 19537873, 19543939, 19541870, 19544883, 19541924, 19555834, 19535119, 19556693, 19539363, 19535092, 19551164, 19560994, 19554396, 19548418, 19532988, 19539975, 19553346, 19530049, 19534148, 19539255, 19544825, 19559837, 19544850, 19552091, 19554425, 19534060, 19560247, 19536375, 19536173, 19547460, 19532090, 19560166, 19537792, 19541498, 19540562, 19558980, 19555518, 19551321, 19533782, 19531509, 19554178, 19557222, 19558216, 19541937, 19542766, 19547804, 19544920, 19558106, 19548012, 19539158, 19559072, 19556832, 19557805, 19534247, 19542737, 19532643, 19535707, 19559219, 19534412, 19552410, 19559658, 19543504, 19529781, 19530079, 19554496, 19551945, 19559438, 19553681, 19555641, 19541655, 19539388, 19539642, 19555354, 19549118, 19537707, 19538779, 19530189, 19558830, 19530694, 19536005, 19537949, 19534852, 19531548, 19559931, 19538030, 19541907, 19541333, 19529932, 19556851, 19539287, 19534902, 19538417, 19547288, 19551688, 19558269, 19533967, 19552540, 19549467, 19542858, 19537892, 19559601, 19557953, 19529621, 19550382, 19559453, 19535276, 19538918, 19530536, 19538677, 19535628, 19559340, 19534237, 19557313, 19555106, 19534906, 19536465, 19551665, 19534345, 19551566, 19551014, 19536991, 19554950, 19538187, 19529921, 19558567, 19548267, 19537896, 19542535, 19530986, 19546539, 19539322, 19558543, 19547071, 19555667, 19558234, 19534931, 19532083, 19530487, 19550691, 19530670, 19557869, 19530479, 19535166, 19530732, 19545320, 19536973, 19531399, 19548128, 19548094, 19535606, 19529597, 19549853, 19557174, 19557081, 19531542, 19533847, 19552098, 19542587, 19533252, 19530887, 19551978, 19553055, 19539252, 19552166, 19557338, 19547982, 19549477, 19535332, 19555748, 19551898, 19541449, 19533833, 19530791, 19548449, 19548368, 19544096, 19537851, 19532649, 19545615, 19540939, 19552049, 19547501, 19547324, 19547241, 19551933, 19529933, 19550627, 19548685, 19533251, 19542993, 19547894, 19532185, 19536156, 19532555, 19534728, 19549441, 19532037, 19543423, 19548933, 19543024, 19530469, 19552437, 19535987, 19550551, 19552230, 19536740, 19533276, 19538115, 19542820, 19551932, 19550046, 19548437, 19553158, 19537559, 19531457, 19535644, 19530601, 19547424, 19542561, 19531981, 19531686, 19559090, 19530378, 19529783, 19544959, 19541787, 19543827, 19530777, 19540475, 19553877, 19547805, 19529737, 19545025, 19547645, 19546944, 19546074, 19539351, 19542198, 19543164, 19532089, 19545702, 19534776, 19536059, 19544584, 19532587, 19532512, 19543526, 19543523, 19548899, 19535126, 19548161, 19530092, 19547354, 19530639, 19531605, 19544224, 19554678, 19531490, 19539740, 19535506, 19544246, 19544217, 19540596 ]";

    expect(parseTopStories(jsonString).first, 19564020);
  });

  test("Parses item.json", () {
    const jsonString = """{"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8952,8884,8887,8869,8958,8940,8908,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}""";

    final article = parseArticle(jsonString);
    expect(article.by, "dhouston");
    expect(article.text, "My YC app: Dropbox - Throw away your USB drive");
    expect(article.url, "http://www.getdropbox.com/u/2/screencast.html");
    expect(article.score, 104);
    expect(article.timestamp, 1175714200);
  });
}